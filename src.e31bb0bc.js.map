{"version":3,"sources":["helpers/active-buttons.js","helpers/disable-buttons.js","helpers/show-element.js","elements/generate-variable.js","helpers/hide-element.js","library/timer.js","events/finish-listener.js","elements/notes.js","helpers/check-answer.js","elements/p5Init.js","index.js","../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["activeBtn","btn","disabled","disableBtn","showElement","element","Array","isArray","forEach","el","style","display","setupTunerVariables","startBtnTune","document","querySelector","finishBtnTune","startBtnGame","finishBtnGame","tuneContainer","tuneContainerText","model_url","tuneNotesForZeroString","note","frequency","setupGameVariables","board","gameInformationContainer","timerTime","scoreCounter","playNoteContainer","showNote","hideElement","eventEmmiter","_handlers","on","eventName","handler","push","off","eventHandlers","filter","handlerItem","emit","data","timer","_minutes","_seconds","_timer","stop","clearTimeout","start","numSeconds","progress","time","Math","floor","innerHTML","color","setTimeout","finishTuneGame","stream","canvas","setupP5Variables","finishTune","finishGame","addEventListener","stopStream","removeCanvas","once","gameVariables","querySelectorAll","fret","classList","remove","app","score","active","getTracks","track","enabled","mapNotes","noteFlat","notesWithPossibleFrequency","checkRightAnswer","shownNoteText","requiredNote","noteFromFreq","removeOkt","Note","fromFreq","findTheClosest","noteElement","activeNote","add","showNotes","replace","base","closest","map","reduce","a","b","abs","find","includes","initPitch","variableOfPitch","pitch","audioContext","freq","threshold","p5sketch","p5library","setup","disableStartBTN","createCanvas","noCanvas","AudioContext","navigator","mediaDevices","getUserMedia","audio","video","startPitch","draw","drawFrequencyContainer","recordDiff","findCloseNoteForTune","diff","drawBorder","ml5","pitchDetection","modelLoaded","getPitch","error","background","textAlign","CENTER","fill","textSize","text","toFixed","width","height","closestNote","Infinity","alpha","rectMode","stroke","strokeWeight","rect","line","noStroke","myp5","p5","_strings","_frets","_guitarTuning","init","createFretboard","startPlay","stringIndex","string","createElement","appendChild","createFrets","noteFret","noteName","generateNote","setAttribute","noteIndex","getNote","notes","skipNotes","allowedNotes","random","length","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","message","stack","overlay","createErrorOverlay","body","getElementById","stackTrace","innerText","getParents","modules","parents","k","d","dep","concat","Function","deps","cached","cache","some","cb"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"src.e31bb0bc.js","sourceRoot":"../src","sourcesContent":["const activeBtn = (btn) => {\n  if(!btn) return\n  btn.disabled = false;\n}\nexport { activeBtn };","const disableBtn = (btn) => {\n  if(!btn) return\n  btn.disabled = true;\n}\nexport { disableBtn };","const showElement = (element) => {\n  if(!element) return\n  if(Array.isArray(element)) {\n    element.forEach(el => {\n      el.style.display = 'flex';\n    })\n  } else {\n    element.style.display = 'flex';\n  }\n}\nexport {showElement};","function setupTunerVariables() {\n  return {\n    startBtnTune: document.querySelector('.interactive-container__play__tuner'),\n    finishBtnTune: document.querySelector('.interactive-container__finish__tuner'),\n    startBtnGame: document.querySelector('.interactive-container__play__game'),\n    finishBtnGame: document.querySelector('.interactive-container__finish__game'),\n    tuneContainer: document.querySelector('.tune-container'),\n    tuneContainerText: document.querySelector('.tune-container__text'),\n    model_url: 'https://cdn.jsdelivr.net/gh/ml5js/ml5-data-and-models/models/pitch-detection/crepe/',\n    tuneNotesForZeroString: [\n      { note: 'E', frequency: '329.69' },\n      { note: 'B', frequency: '246.99' },\n      { note: 'G', frequency: '196.99' },\n      { note: 'D', frequency: '146.89' },\n      { note: 'A', frequency: '110.00' },\n      { note: 'E2', frequency: '83.41' }\n    ]\n  }\n}\n\n\nfunction setupGameVariables() {\n  return {\n    board: document.querySelector('.guitar-board'),\n    gameInformationContainer: document.querySelector('.game-information'),\n    timerTime: document.querySelector('.timer__time'),\n    scoreCounter: document.querySelector('.score__counter'),\n    playNoteContainer: document.querySelector('.play-note'),\n    showNote: document.querySelector('.play-note__show-note')\n  }\n}\n\nexport { setupTunerVariables, setupGameVariables }","const hideElement = (element) => {\n  if(!element) return\n  if(Array.isArray(element)) {\n    element.forEach(el => {\n      el.style.display = 'none';\n    })\n  } else {\n    element.style.display = 'none';\n  }\n}\n\nexport { hideElement };","const eventEmmiter = {\n  _handlers: {},\n  on(eventName, handler) {\n    this._handlers[eventName] = this._handlers[eventName] || [];\n    this._handlers[eventName].push(handler);\n    return handler;\n  },\n  off(eventName, handler) {\n    if (!handler) {\n      this._handlers[eventName] = [];\n      return;\n    }\n    const eventHandlers = this._handlers[eventName] || [];\n    this._handlers[eventName] = eventHandlers.filter((handlerItem) => handlerItem !== handler);\n  },\n  emit(eventName, data) {\n    const eventHandlers = this._handlers[eventName] || [];\n    eventHandlers.forEach((handler) => handler(data));\n  },\n};\nconst timer = {\n  ...eventEmmiter,\n  timerTime: document.querySelector('.timer__time'),\n  _minutes: 0,\n  _seconds: 0,\n  _timer: null,\n  stop() {\n    clearTimeout(this._timer);\n    this.emit('stop');\n  },\n  start(numSeconds) {\n    clearTimeout(this._timer);\n    this.emit('start');\n    this.progress(numSeconds);\n  },\n  progress(numSeconds) {\n    this.emit('progress', { time: numSeconds });\n    this._minutes = Math.floor(numSeconds / 60);\n    this._seconds = numSeconds % 60;\n    this._seconds = this._seconds < 10 ? '0' + this._seconds : this._seconds;\n    if (numSeconds > 0) {\n      if (this.timerTime) {\n        this.timerTime.innerHTML = `${this._minutes} : ${this._seconds}`;\n      }\n      if (numSeconds < 10) {\n        this.timerTime.style.color = 'red';\n      }\n      numSeconds--;\n      this._timer = setTimeout(() => this.progress(numSeconds), 1000);\n    } else {\n      this.timerTime.innerHTML = `00 : 00`;\n      this.stop();\n    }\n  },\n};\n\nexport { timer };","import { activeBtn } from '../helpers/active-buttons';\nimport { disableBtn } from '../helpers/disable-buttons';\nimport { showElement } from '../helpers/show-element';\nimport { setupGameVariables } from '../elements/generate-variable';\nimport { hideElement } from '../helpers/hide-element';\nimport { timer } from '../library/timer';\nimport { app } from '../index'\nconst finishTuneGame = (stream, canvas, setupP5Variables) => {\n  if (setupP5Variables.finishBtnTune && setupP5Variables.tuneContainerText, setupP5Variables.finishBtnGame) {\n    finishTune(stream, canvas, setupP5Variables);\n    finishGame(stream, setupP5Variables)\n  }\n}\nconst finishTune = (stream, canvas, setupP5Variables) => {\n  setupP5Variables.finishBtnTune.addEventListener('click', () => {\n    stopStream(stream);\n    removeCanvas(canvas);\n    showElement(setupP5Variables.tuneContainerText);\n    activeBtn(setupP5Variables.startBtnTune);\n    activeBtn(setupP5Variables.startBtnGame);\n    disableBtn(setupP5Variables.finishBtnTune);\n\n  }, { once: true });\n}\n\nconst finishGame = (stream, setupP5Variables) => {\n  let gameVariables = setupGameVariables();\n  timer.on('stop', () => {\n    stopStream(stream);\n    document.querySelectorAll('.fret.active').forEach(fret => {\n      fret.classList.remove('active');\n    });\n    disableBtn(setupP5Variables.finishBtnGame);\n    activeBtn(setupP5Variables.startBtnGame);\n    activeBtn(setupP5Variables.startBtnTune);\n    app.gameVariables.scoreCounter.innerHTML = `${app.score = 0}`\n    hideElement([gameVariables.gameInformationContainer, gameVariables.playNoteContainer]);\n  });\n\n  setupP5Variables.finishBtnGame.addEventListener('click', () => {\n    stopStream(stream);\n    document.querySelectorAll('.fret.active').forEach(fret => {\n      fret.classList.remove('active');\n    });\n    disableBtn(setupP5Variables.finishBtnGame);\n    activeBtn(setupP5Variables.startBtnGame);\n    activeBtn(setupP5Variables.startBtnTune);\n    app.gameVariables.scoreCounter.innerHTML = `${app.score = 0}`\n    hideElement([gameVariables.gameInformationContainer, gameVariables.playNoteContainer]);\n    timer.stop();\n  }, { once: true });\n}\n\nconst stopStream = (stream) => {\n  if (stream.active) {\n    stream.getTracks().forEach(function (track) {\n      track.stop();\n      track.enabled = false;\n    });\n  };\n}\n\nconst removeCanvas = (canvas) => {\n  if (!canvas) return\n  canvas.remove();\n}\n\nexport { finishTuneGame };","const mapNotes = {\n  noteFlat: ['С', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bd', 'B'],\n  notesWithPossibleFrequency: [{\n    note: 'C',\n    frequency: [16, 33, 65, 131, 262, 523, 1047, 2093, 4186]\n  },\n  {\n    note: 'Db',\n    frequency: [17, 35, 69, 139, 277, 554, 1109, 2217, 4435]\n  },\n  {\n    note: 'D',\n    frequency: [18, 37, 73, 147, 294, 587, 1175, 2349, 4699]\n  },\n  {\n    note: 'Eb',\n    frequency: [19, 38, 77, 155, 311., 622, 1244, 2489, 4978]\n  },\n  {\n    note: 'E',\n    frequency: [21, 41, 82, 165, 330, 659, 1319, 2637, 5274]\n  },\n  {\n    note: 'F',\n    frequency: [22, 44, 87, 175, 349, 698, 1397, 2794, 5588]\n  },\n  {\n    note: 'Gb',\n    frequency: [23, 46, 93, 185, 370, 740, 1480, 2960, 5920]\n  },\n  {\n    note: 'G',\n    frequency: [25, 49, 98, 196, 392, 784, 1568, 3136, 6272]\n  },\n  {\n    note: 'Ab',\n    frequency: [26, 52, 98, 104, 415, 831, 1661, 3322, 6645]\n  },\n  {\n    note: 'A',\n    frequency: [28, 55, 110, 220, 440, 880, 1760, 3520, 7040]\n  },\n  {\n    note: 'Bb',\n    frequency: [29, 58, 117, 233, 466, 932, 1865, 3729, 7459]\n  },\n  {\n    note: 'B',\n    frequency: [31, 62, 123, 247, 494, 988, 1976, 3951, 7902]\n  },\n  ]\n}\nexport { mapNotes }","import { Note } from '@tonaljs/tonal';\nimport { mapNotes } from '../elements/notes';\nimport { app } from '../index';\nconst checkRightAnswer = (frequency) => {\n  if (frequency && frequency > 0) {\n    let shownNoteText = app.requiredNote;\n    let noteFromFreq = removeOkt(Note.fromFreq(frequency));\n    let note = findTheClosest(mapNotes.notesWithPossibleFrequency, frequency);\n    mapNotes.notesWithPossibleFrequency.forEach(noteElement => {\n      if (noteFromFreq == noteElement.note && note.note == noteFromFreq && noteFromFreq == shownNoteText) {\n        document.querySelectorAll('.fret.active').forEach(fret => {\n          fret.classList.remove('active');\n        });\n        app.activeNote[app.requiredNote].forEach(fret => {\n          fret.classList.add('active');\n        });\n        app.gameVariables.scoreCounter.innerHTML = `${app.score + 1}`;\n        app.showNotes();\n      }\n    })\n  }\n}\n\nconst removeOkt = (noteFromFreq) => {\n  return noteFromFreq.replace(/\\d+/g, '');\n}\n\nconst findTheClosest = (note, base) => {\n  const closest = note.map(el =>\n    el.frequency.reduce((a, b) => Math.abs(b - base) < Math.abs(a - base) ? b : a)\n  ).reduce((a, b) => Math.abs(b - base) < Math.abs(a - base) ? b : a);\n\n  return note.find(note => note.frequency.includes(closest));\n}\n\nexport { checkRightAnswer };","import { finishTuneGame } from '../events/finish-listener';\nimport { timer } from '../library/timer';\nimport { checkRightAnswer } from '../helpers/check-answer';\n\nconst initPitch = (variableOfPitch, setupP5Variables) => {\n  if (!setupP5Variables.startBtnTune\n    && !setupP5Variables.finishBtnTune\n    && !setupP5Variables.tuneContainer\n    && !setupP5Variables.tuneContainerText\n    && !setupP5Variables.model_url) {\n    return;\n  }\n  let pitch;\n  let stream;\n  let canvas;\n  let audioContext;\n  let freq = 0;\n  let threshold = 1;\n\n  const p5sketch = function (p5library) {\n    p5library.setup = async function () {\n      disableStartBTN(setupP5Variables.startBtnTune);\n      disableStartBTN(setupP5Variables.startBtnGame);\n      if (variableOfPitch === 'tuner') {\n        p5library.createCanvas(400, 400);\n        canvas = document.querySelector('canvas');\n      } else {\n        p5library.noCanvas();\n        timer.start(60);\n      }\n      audioContext = new AudioContext();\n      stream = await navigator.mediaDevices.getUserMedia({ audio: true, video: false });\n      startPitch(stream, audioContext);\n\n      finishTuneGame(stream, canvas, setupP5Variables);\n\n    };\n    p5library.setup();\n    if (variableOfPitch == 'tuner') {\n      p5library.draw = function () {\n        drawFrequencyContainer();\n        let recordDiff = findCloseNoteForTune();\n        let diff = recordDiff;\n        drawBorder(diff);\n      };\n    } else {\n\n    }\n\n    function startPitch(stream, audioContext) {\n      pitch = ml5.pitchDetection(setupP5Variables.model_url, audioContext, stream, modelLoaded);\n    }\n\n    function modelLoaded() {\n      getPitch();\n    }\n\n    function getPitch() {\n      pitch.getPitch((error, frequency) => {\n        if (frequency) {\n          freq = frequency;\n          if (variableOfPitch !== 'tuner') {\n            checkRightAnswer(freq);\n          }\n        }\n        getPitch();\n      })\n    }\n\n    function drawFrequencyContainer() {\n      p5library.background(0);\n      p5library.textAlign(p5library.CENTER, p5library.CENTER);\n      p5library.fill(255);\n      p5library.textSize(32);\n      p5library.text(freq.toFixed(2), p5library.width / 2, p5library.height - 150);\n    }\n\n    function findCloseNoteForTune() {\n      let closestNote = -1;\n      let recordDiff = Infinity;\n      setupP5Variables.tuneNotesForZeroString.forEach(note => {\n        let diff = freq - note.frequency;\n        if (p5library.abs(diff) < p5library.abs(recordDiff)) {\n          closestNote = note;\n          recordDiff = diff;\n        }\n      });\n      p5library.textSize(64);\n      p5library.text(closestNote.note, p5library.width / 2, p5library.height - 50);\n      return recordDiff\n    }\n\n    function drawBorder(diff) {\n      let alpha = p5library.map(p5library.abs(diff), 0, 100, 255, 0);\n      p5library.rectMode(p5library.CENTER);\n      p5library.fill(255, alpha);\n      p5library.stroke(255);\n      p5library.strokeWeight(1);\n      if (p5library.abs(diff) < threshold) {\n        p5library.fill(0, 255, 0);\n      }\n      p5library.rect(200, 100, 200, 50);\n\n      p5library.stroke(255);\n      p5library.strokeWeight(4);\n      p5library.line(200, 0, 200, 200);\n\n      p5library.noStroke();\n      p5library.fill(255, 0, 0);\n      if (p5library.abs(diff) < threshold) {\n        p5library.fill(0, 255, 0);\n      }\n      p5library.rect(200 + diff / 2, 100, 10, 75);\n    }\n\n    function disableStartBTN(startBtnTune) {\n      if (!startBtnTune) return\n      startBtnTune.disabled = true;\n    }\n  }\n\n  const myp5 = new p5(p5sketch, setupP5Variables.tuneContainer);\n};\n\nexport { initPitch };\n","import { initPitch } from '/elements/p5Init';\nimport { activeBtn } from '../src/helpers/active-buttons';\nimport { hideElement } from '../src/helpers/hide-element';\nimport { showElement } from '../src/helpers/show-element';\nimport { setupTunerVariables, setupGameVariables } from '../src/elements/generate-variable';\nimport { mapNotes } from '../src/elements/notes';\n\nconst app = {\n  _strings: 6,\n  _frets: 3,\n  _guitarTuning: [4, 11, 7, 2, 9, 4],\n  score: 0,\n  setupP5Variables: setupTunerVariables(),\n  gameVariables: setupGameVariables(),\n\n  init() {\n    this.createFretboard();\n    this.startPlay();\n  },\n\n  createFretboard() {\n    for (let stringIndex = 0; stringIndex < this._strings; stringIndex++) {\n      let string = document.createElement('div');\n      if (string) {\n        string.classList.add('string');\n        this.gameVariables.board.appendChild(string);\n        this.createFrets(stringIndex, string);\n      }\n    }\n  },\n\n  createFrets(stringIndex, string) {\n    for (let fret = 0; fret <= this._frets; fret++) {\n      let noteFret = document.createElement('div');\n      noteFret.classList.add('fret');\n      string.appendChild(noteFret);\n      let noteName = this.generateNote((fret +  this._guitarTuning[stringIndex]));\n\n      noteFret.setAttribute('note', noteName);\n      this.activeNote = this.activeNote || {};\n      this.activeNote[noteName] = this.activeNote[noteName] || [];\n      this.activeNote[noteName].push(noteFret);\n    }\n  },\n\n  generateNote(noteIndex) {\n    noteIndex %= 12;\n    let noteName = mapNotes.noteFlat[noteIndex];\n    return noteName;\n  },\n\n  startPlay() {\n    if (this.setupP5Variables.startBtnTune &&  this.setupP5Variables.finishBtnTune) {\n      this.setupP5Variables.startBtnTune.addEventListener('click', () => {\n        hideElement(this.setupP5Variables.tuneContainerText);\n        activeBtn(this.setupP5Variables.finishBtnTune);\n        initPitch('tuner', this.setupP5Variables);\n      });\n    }\n    if (this.setupP5Variables.startBtnGame && this.setupP5Variables.finishBtnGame) {\n      this.setupP5Variables.startBtnGame.addEventListener('click', () => {\n        showElement([this.gameVariables.gameInformationContainer, this.gameVariables.playNoteContainer]);\n        activeBtn(this.setupP5Variables.finishBtnGame);\n        this.showNotes();\n        initPitch('game', this.setupP5Variables);\n      });\n    }\n  },\n\n  showNotes() {\n    const note = this.getNote(mapNotes.noteFlat, [this.requiredNote]);\n    this.requiredNote = note;\n    this.gameVariables.showNote.innerHTML = note;\n  },\n\n  getNote(notes, skipNotes) {\n    const allowedNotes = notes.filter(note => !skipNotes.includes(note));\n    const noteIndex = Math.floor(Math.random() * Math.floor(allowedNotes.length))\n    return allowedNotes[noteIndex];\n  },\n}\napp.init();\n\nexport { app };","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}